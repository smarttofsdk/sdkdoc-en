.. _doc_param:

Parameters and filter
=====================

SmartToF mainly uses the module parameter settings and filter function settings to control the function settings of the module during collection,
All module parameter items and filtering function item definitions are in the dmcam.h header file in the SDK.

Module parameter description
++++++++++++++++++++++++++++

Module parameter enum type definition :: 

    /**dmcam param ID*/
    typedef enum {             
      PARAM_DEV_MODE=0,      /**< device work mode*/
      PARAM_MOD_FREQ,          /**< modulation frequency*/
      PARAM_INFO_VENDOR,      /**< production vendor information*/
      PARAM_INFO_PRODUCT,     /**< production information*/
      PARAM_INFO_CAPABILITY,  /**< production capability*/
      PARAM_INFO_SERIAL,      /**< porduction serials id*/
      PARAM_INFO_VERSION,     /**< HW&SW info */
      PARAM_INFO_SENSOR,      /**< part version, chip id, wafer id */
      PARAM_INFO_CALIB,       /**< get calibration info */
      PARAM_ROI,              /**< ROI set/get*/
      PARAM_FRAME_FORMAT,     /**< frame information,eg.dcs1for gray,4 dcs for distance*/
      PARAM_ILLUM_POWER,      /**< illumination power set/get*/
      PARAM_FRAME_RATE,       /**< frame rate set/get*/
      PARAM_INTG_TIME,        /**< integration time set/get*/
      PARAM_PHASE_CORR,       /**< phase offset correction*/
      PARAM_TEMP,             /**< <Get camera temperature--------------*/
      PARAM_HDR_INTG_TIME,    /**< <Setting HDR integration time param*/
      PARAM_SYNC_DELAY,       /**< <delay ms for sync use*/
      PARAM_SYS_CALIB_COEFF,      /**< system calibration coefficent*/
      PARAM_SYNC_SYS_TIME,       /**< set/get module time*/
      PARAM_AMBIENT_LIGHT_COEFF, /**< set ambient light calibration coeff. */
      PARAM_DUAL_MOD_FREQ,       /**< set mod_freq */
      PARAM_INFO_LENS,           /**< Get lens param */
      PARAM_FLIP,                /**< image flip*/
      PARAM_RESERVED,            /**< rererved*/
      PARAM_INFO_CALIB_FREQ,     /**< calibration information*/
      PARAM_DEL_CALIB_DATA,      /**< Delete calibration data*/
      PARAM_ENUM_COUNT,
    }dmcam_dev_param_e;
   
   Module parameter enum type description
	
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| Parameter name                 | Ranges                                    | Description                                                             |
+================================+===========================================+=========================================================================+
| PARAM\_DEV\_MODE               | -                                         | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_MOD\_FREQ               | TC-E2,3,4(12,24,36MHZ) TS-3 (10~100MHz)   | Frequency should correspond to calibration data                         |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_VENDOR            | readonly                                  | Digtal Miracle                                                          |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_PRODUCT           | readonly                                  | Module name，for example TC-E2-1.0                                      |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_CAPABLITY         | readonly                                  |                                                                         |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_SERIAL            | readonly                                  | unique data                                                             |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_VERSION           | readonly                                  | Software and hardware version                                           |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_SENSOR            | readonly                                  | sensor ID                                                               |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_CALIB             | readonly                                  | Query calibration data information                                      |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_ROI                     | 320\ *240 320*\ 160                       |                                                                         |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_FRAME\_FORMART          | TC-E2,3,4 (2,4) TC-S3 15,16,17            | TC-E2,3,4 default 2, sport mode1 is 4 TC-S3 default 16                  |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_ILLUM\_POWER            | -                                         | Only TC-S3.1 support                                                    |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_FRAME\_RATE             | 1~30                                      | TC-S3 Dual frequency and HDR mode frame rate will be halved             |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INTG\_TIME              | TC-E series 0-1500 TC-S series 0~1000     | exposure time in normal mode                                            |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_PHASE\_CORR             | -                                         | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_TEMP                    | readonly                                  | Read sensor temperature and illumination board temperature separately   |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_HDR\_INTG\_TIME         | TC-E series 0-1500 TC-S series 0~1000     | exposure time in HDR mode                                               |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_SYNC\_DELAY             | 0ms-6ms                                   | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_SYS\_CALIB\_COEFF       | -                                         | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_SYNC\_SYS\_TIME         | -                                         | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_AMBIENT\_LIGHT\_COEFF   | -                                         | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_DUAL\_MOD\_FREQ         | TC-S series 10~100MHz                     | Only supported TC-S series module                                       |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_LENS              | -                                         | lens calibration information                                            |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_FLIP                    | -                                         | reserved                                                                |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_INFO\_CALIB\_FREQ       | -                                         | Get calibrated frequency list                                           |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
| PARAM\_DEL\_CALIB\_DATA        | -                                         | Delete calibration data and only support in TC-S series modules         |
+--------------------------------+-------------------------------------------+-------------------------------------------------------------------------+
	
Module filter type description
+++++++++++++++++++++++++++++++

Module filtering types include depth filtering, amplitude filtering, automatic exposure, sports mode, etc.
defined as follows ::

    /** filter ID  */
    typedef enum {
      DMCAM_FILTER_ID_LEN_CALIB,    /**< lens calibration*/
      DMCAM_FILTER_ID_PIXEL_CALIB,  /**< pixel calibration*/
      DMCAM_FILTER_ID_DEPTH_FILTER,  /**< Depth filter */
      DMCAM_FILTER_ID_RESERVED,        /**< RESERVED */
      DMCAM_FILTER_ID_AMP,          /**< Amplitude filter control*/
      DMCAM_FILTER_ID_AUTO_INTG,    /**< auto integration filter enable : use sat_ratio to adjust */
      DMCAM_FILTER_ID_SYNC_DELAY,   /**<  sync delay */
      DMCAM_FILTER_ID_TEMP_MONITOR, /**< temperature monitor */
      DMCAM_FILTER_ID_HDR,          /**< HDR mode */
      DMCAM_FILTER_ID_OFFSET,       /**<  set offset for calc distance */
      DMCAM_FILTER_ID_SPORT_MODE,   /**<  set sport mode */
      DMCAM_FILTER_ID_SYS_CALIB,   /**< using system calibration param */
      DMCAM_FILTER_ID_AMBIENT_LIGHT_CALIB,   /**< using ambient light calib calibration param */
      DMCAM_FILTER_ID_FLYNOISE,   /**< fly noise filter */

      DMCAM_FILTER_ID_TEMP_CALIB,/*Temperature calibration*/
      DMCAM_FILTER_ID_MEDIAN = DMCAM_FILTER_ID_DEPTH_FILTER,  /**<  MEDIAN is replaced with depth filter */
      DMCAM_FILTER_CNT,
    }dmcam_filter_id_e;


.. note ::
    
	For the parameter value corresponding to each ID, please refer to the filter setting example.


+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Filter ID                                  | Description                                                                                                                                                                                                                               |
+============================================+===========================================================================================================================================================================================================================================+
| DMCAM\_FILTER\_ID\_LEN\_CALIB              | lens calibration enable/disable ID                                                                                                                                                                                                        |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_PIXEL\_CALIB            | pixel calibration enable/disable ID                                                                                                                                                                                                       |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_DEPTH\_FILTER           | Depth filter                                                                                                                                                                                                                              |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_RESERVED                | RESERVED                                                                                                                                                                                                                                  |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_AMP                     | Amplitude filter control, ranges 0~100                                                                                                                                                                                                    |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_AUTO\_INTG              | auto integration filter enable                                                                                                                                                                                                            |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_SYNC\_DELAY             | sync delay                                                                                                                                                                                                                                |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_TEMP\_MONITOR           | temperature monitor                                                                                                                                                                                                                       |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_HDR                     | HDR mode                                                                                                                                                                                                                                  |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_OFFSET                  | set offset for calculate distance                                                                                                                                                                                                         |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_SPORT\_MODE             | set sport mode , for TC-E series module: No sport mode 18ms motion blur ,4xDCS ``sport_mode`` = 0 ,6ms motion blur ,2xDCS ``sport_mode`` = 1 , no motion blur, 2xDCS high nosies ``sport_mode`` = 2 , 6ms motion blur,2xDCS high nosies   |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_SYS\_CALIB              | using system calibration parameter                                                                                                                                                                                                        |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_AMBIENT\_LIGHT\_CALIB   | using ambient light calibration parameter,reserved                                                                                                                                                                                        |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_FLYNOISE                | fly noise filter                                                                                                                                                                                                                          |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_TEMP\_CALIB             | Temperature calibration                                                                                                                                                                                                                   |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| DMCAM\_FILTER\_ID\_MEDIAN                  | MEDIAN is replaced with depth filter, discarded                                                                                                                                                                                           |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

		
Detailed description of frame rate and sport mode
++++++++++++++++++++++++++++++++++++++++++++++++++


TC / TCM-E3 is a module specifically designed for high frame rate applications. The highest frame rate can reach 120 frames. The motion mode is to eliminate the effects of motion blur,
their relationship is as follows:

+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
| Module series   | Mode           | fps ranges   | Real fps                      | motion blur   | Depth resolution                                                          | Depth map accuracy                      |
+=================+================+==============+===============================+===============+===========================================================================+=========================================+
| TC-E2           | Normal mode    | 1-30         | fps                           | 21ms          | 320x240                                                                   | Normal precision(calculated by 4xDCS)   |
+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
| TC-E2           | sport mode 0   | 1-30         | fps                           | 7ms           | Vertical resolution halved ：320x120( output the interpolation 320x240)   | Normal precision(calculated by 4xDCS)   |
+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
| TC-E2           | Sport mode 1   | 1-30         | fps                           | 0ms           | Vertical resolution halved ：320x120( output the interpolation 320x240)   | Half accuracy (calculated by 2xDCS)     |
+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
| TC-E3           | Normal mode    | 1-30         | fps(fps<20) fpsx4(fps >=20)   | 21ms          | 320x240                                                                   | Normal precision(calculated by 4xDCS)   |
+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
| TC-E3           | Sport mode 0   | 1-30         | fpsx2                         | 7ms           | Vertical resolution halved ：320x120( output the interpolation 320x240)   | Normal precision(calculated by 4xDCS)   |
+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
| TC-E3           | Sport mode 1   | 1-30         | fpsx4                         | 0ms           | Vertical resolution halved ：320x120( output the interpolation 320x240)   | Half accuracy (calculated by 2xDCS)     |
+-----------------+----------------+--------------+-------------------------------+---------------+---------------------------------------------------------------------------+-----------------------------------------+
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	